# 前端（AI_making）→ 后端（open-webui）迁移功能审查清单

> 目标：保留你前端全部体验，用 open-webui 后端能力替换并增强。

## 1) 你已确认要保留/接入的能力

### A. 第一优先级（必须接通）
- 聊天与流式生成（chats / models / openai / ollama）
- 文件上传与文件管理（files）
- 音频 TTS（audio）
- 基础配置读取（configs）

### B. 第二优先级（你已确认也要）
- 检索增强 RAG（retrieval / knowledge）
- 提示词库（prompts）
- 多会话与文件夹组织（folders / notes / channels）

## 2) 额外审查后，建议“必须保留”的现有前端功能（你刚刚提醒的重点）

这些功能不是 open-webui 的模块名，但属于你当前前端已经在用的用户体验，迁移时必须保留：

1. **对话导出 PDF**
   - 你前端在聊天页初始化并注入“📥 导出PDF”按钮。
   - 这是你当前可见功能，不应因为后端替换而丢失。

2. **语音转文字 STT（Whisper 上传转录）**
   - 你前端输入区支持音频文件上传并调用转录接口。
   - 即使后续切到 open-webui audio，也要保持“前端一键转录”体验不变。

3. **流式生成中断（Abort / Esc / 停止按钮）**
   - 你前端支持 `Esc` 停止和“⏹️ 停止生成”。
   - 迁移后 SSE 中断语义必须一致。

4. **TTS 自动朗读与控制面板**
   - 包含开关、音色、音量、测试、停止播放、本地持久化。

5. **多模态附件体验完整保留**
   - 拖拽/选择上传、批量上传、文件类型校验、上传进度、附件列表。

6. **Markdown/LaTeX/代码高亮与复制体验**
   - 这是你消息渲染的核心体验，不能因后端改造退化。

7. **智能建议（Smart Suggestions）**
   - 按文件类型和上下文给快捷提示，属于你前端特色能力。

8. **模型选择器与视觉能力标识**
   - 前端当前有模型切换与“视觉支持”状态展示。

9. **聊天基础可用性**
   - 清空会话、欢迎消息、键盘快捷键（Ctrl+/、Esc 等）、本地设置记忆。

10. **首访引导（UserGuide）**
   - 首次访问引导属于产品体验，建议保留。

## 3) 建议删除/暂缓的模块（与你已选方向一致）

- SCIM
- Evaluations
- Pipelines
- Groups
- Memories

> 原则：先不接入口，也不在你前端暴露入口；后续如果业务需要再单独评估。

## 4) 迁移执行时的“验收标准”

### 功能验收（必须全部满足）
- 聊天（普通+流式）可用，且能中断。
- 文件上传与附件回填可用（单文件/多文件）。
- TTS 可用（自动朗读/手动测试/停止）。
- RAG 文档问答与知识库检索可用。
- Prompts 可查询并在前端可使用。
- 多会话、文件夹、笔记/频道可用。
- 导出 PDF 仍可一键导出。
- STT 仍可把音频转文字回填输入框。

### 体验验收（不能退化）
- 代码高亮、LaTeX、复制按钮正常。
- 智能建议可根据上下文和文件类型触发。
- 现有快捷键行为保持一致（至少 Esc 中断）。

## 5) 建议的接口适配优先顺序（对接 open-webui）

1. `chat/stream` 适配（含中断和错误语义映射）
2. `upload` / `upload/multiple` / 文件详情查询适配
3. `tts/generate` 适配
4. `configs` 读取适配
5. `retrieval/knowledge`（RAG）适配
6. `prompts` 适配
7. `chats/folders/notes/channels` 适配
8. 最后补齐 STT 接入统一（可保持 whisper-service 兼容模式）

---

如果你确认此清单，我下一步会给你一份“逐接口映射表（你前端接口 -> open-webui 目标接口）”，并直接开始改造。
